<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="peer.dao.booking.ShareMapper">

	<!-- 예약정보 불러오기 -->
	<select id="getShareInfo" resultType="peer.model.booking.ShareBean">
		select * from share_booking where user_num_1 = #{user_num}
	</select>
	
	<!-- 회원 성별 가져오기(임시) -->
	<select id="getGender" resultType="String">
		select user_gender from user_info where user_num = #{user_num}
	</select>

	<!-- 대기열 리스트 -->
	<select id="getQueList" resultType="peer.model.member.MemberBean">
		select * from user_info where user_num in (
			select user_num_1 from share_booking
			<![CDATA[
			where to_char(checkin, 'YYYYMMDD') = to_char(#{info.checkin}, 'YYYYMMDD')   
			and to_char(checkout, 'YYYYMMDD') = to_char(#{info.checkout}, 'YYYYMMDD')   
			and house_num = #{info.house_num}  
			and share_check = 1 
			) and user_gender = #{gender}
			]]>
	</select>
</mapper>