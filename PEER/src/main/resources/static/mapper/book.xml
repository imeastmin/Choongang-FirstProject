<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="peer.dao.booking.HouseViewDao">


<!-- 유저 정보 불러오기 -->
<select id="getUserinfo" parameterType="int" resultType="peer.model.member.MemberBean">
select * from user_info where user_num = #{user_num} 
</select>


<!-- 호스트 이름 불러오기 -->
<select id="getHostname" parameterType="peer.model.house.HouseBean" resultType="peer.model.booking.HouseViewBean">
select user_name from user_info where user_num = (select user_num from house where house_num = #{house_num})
</select>


<!-- 예약 정보 입력 -->
<insert id="bookingInsert" parameterType="peer.model.booking.BookingBean">
insert into booking(book_num, house_num, total_price, user_num, house_price, checkin, checkout) values(booking_seq.nextval, 
#{house_num}, #{total_price}, #{user_num}, #{house_price}, #{checkin}, #{checkout})
</insert>


<!-- 예약 정보 결과창에 출력 -->
<select id="bookingSelect" parameterType="peer.model.booking.BookingBean">
select * from booking where book_num = (select booking_seq.currval from booking)
</select>


</mapper>