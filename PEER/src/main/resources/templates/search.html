<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="/common/layout.html :: head('Peer')"></th:block>
<th:block th:replace="/common/header :: header"></th:block>

<!-- 지도 버튼 -->
<button type="button" id="list" onclick="fun1(); fun2();">
	<span>목록 보기</span>
</button>
<div id="map">
	<!-- 지도 확대, 축소 컨트롤 div 입니다 -->
	<div class="custom_zoomcontrol radius_border">
		<span onclick="zoomIn()"><img src="img/plus.png" alt="확대"></span>
		<span onclick="zoomOut()"><img src="img/minus.png" alt="축소"></span>
	</div>
</div>

<div id="map_list">
		<div class="card" th:each="hlist : ${hosthouselist}">
			<a th:href="@{/house_cont(house_num=${hlist.house_num},page=${page},state='cont')}">
				<img class="card-img-top" src="img/hero-slider-2.jpg">
				<div class="card-body">
					<span class="card-title">[[${hlist.house_name}]]</span>
					<p class="card-text">[[${hlist.house_address}]]</p>
				</div>
			</a>
		</div>
</div>

<script type="text/javascript"
	src="//dapi.kakao.com/v2/maps/sdk.js?appkey=95a4da028c3d633f5c747045e4fae8dd"></script>
<!-- <script src="js/search.js"></script>  -->

<script th:inline="javascript">
	/*<![CDATA[*/

	//	지도 버튼 
	var subs = document.querySelector("#list");

	subs.addEventListener("click", function fun1() {
		if (subs.innerText === '목록 보기') {
			subs.innerText = '지도 펼치기 ';
		} else
			subs.innerText = '목록 보기';
	});

	subs.addEventListener("click", function fun2() {
		if (subs.innerText === '지도 펼치기') {
			window.scrollTo({
				top : document.querySelector("#map_list").offsetTop,
				behavior : "smooth"
			});
		} else
			window.scrollTo({
				top : 0,
				left : 0,
				behavior : "smooth"
			});
	});

	// 지도를 표시할 div
	var mapContainer = document.getElementById('map'), mapOption = {
		center : new kakao.maps.LatLng(37.556397, 126.945195), // 지도의 중심좌표
		level : 2
	// 지도의 확대 레벨
	};

	// 지도를 표시할 div와 지도 옵션으로 지도를 생성합니다
	var map = new kakao.maps.Map(mapContainer, mapOption);

	// 지도 확대, 축소 컨트롤에서 확대 버튼을 누르면 호출되어 지도를 확대하는 함수입니다
	function zoomIn() {
		map.setLevel(map.getLevel() - 1);
	}

	// 지도 확대, 축소 컨트롤에서 축소 버튼을 누르면 호출되어 지도를 확대하는 함수입니다
	function zoomOut() {
		map.setLevel(map.getLevel() + 1);
	}

	// 지도에 마커를 표시합니다
	var marker = new kakao.maps.Marker({
		map : map,
		position : new kakao.maps.LatLng(37.556397, 126.945195)
	});

	//인포윈도우로 장소에 대한 설명을 표시합니다
	var iwContent = '<div style="width: 288px; height:115px;">'
			+ '<div class="info">'
			+ '<div class="title">'
			+ '중앙정보기술인재개발원'
			+ '</div>'
			+ '<div class="body">'
			+ '<div class="img">'
			+ '<img src="img/hero-slider-5.jpg" width="73" height="80">'
			+ '</div>'
			+ '<div class="desc">'
			+ '<div class="ellipsis">서울특별시 마포구 신촌로 176</div>'
			+ '<div><a href="http://localhost/house_cont?house_num=8&page=1&state=cont" target="_blank" class="link">홈페이지</a></div>'
			+ '</div>' + '</div>' + '</div>' + '</div>', // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
	iwRemoveable = true; // removeable 속성을 ture 로 설정하면 인포윈도우를 닫을 수 있는 x버튼이 표시됩니다

	//인포윈도우를 생성합니다
	var infowindow = new kakao.maps.InfoWindow({
		content : iwContent,
		removable : iwRemoveable
	});

	// 마커에 클릭이벤트를 등록합니다
	kakao.maps.event.addListener(marker, 'click', function() {
		// 마커 위에 인포윈도우를 표시합니다
		infowindow.open(map, marker);
	});

	/*]]>*/
</script>

</html>